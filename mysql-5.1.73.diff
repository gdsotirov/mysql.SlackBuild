# Fix build with older openssl. See http://bugs.mysql.com/bug.php?id=68999
diff -urNad mysql-5.1.73-orig/vio/viossl.c mysql-5.1.73/vio/viossl.c
--- mysql-5.1.73-orig/vio/viossl.c	2013-11-04 20:52:27.000000000 +0200
+++ mysql-5.1.73/vio/viossl.c	2014-03-16 17:37:45.000000000 +0200
@@ -199,8 +199,10 @@
   SSL_SESSION_set_timeout(SSL_get_session(ssl), timeout);
   SSL_set_fd(ssl, vio->sd);
 #ifndef HAVE_YASSL
+#ifdef SSL_OP_NO_COMPRESSION
   SSL_set_options(ssl, SSL_OP_NO_COMPRESSION);
 #endif
+#endif
 
   if (connect_accept_func(ssl) < 1)
   {
